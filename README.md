# qBit Smart Web Manager

<p align="center">
  <img src="https://img.shields.io/badge/version-1.18.0-blue.svg" alt="Version">
  <img src="https://img.shields.io/badge/python-3.8+-green.svg" alt="Python">
  <img src="https://img.shields.io/badge/license-MIT-orange.svg" alt="License">
</p>

<p align="center">
  åŸºäº <code>main.py v11.0.0 PRO</code> æ™ºèƒ½é™é€Ÿè„šæœ¬å¼€å‘çš„ <b>Web ç®¡ç†å¹³å°</b>
  <br>
  æä¾›ç¾è§‚çš„ç•Œé¢æ¥ç®¡ç†æ‚¨çš„ qBittorrent å’Œ PT ç«™ç‚¹
</p>

---

## ğŸš€ ä¸€é”®å®‰è£…

```bash
bash <(curl -sL https://raw.githubusercontent.com/1336665/qbit-smart-web/main/install.sh)
```

è¿è¡Œåæ˜¾ç¤ºäº¤äº’å¼èœå•ï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—            â•‘
â•‘           â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•    â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘            â•‘
â•‘           â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘            â•‘
â•‘           â–ˆâ–ˆâ•‘â–„â–„ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘            â•‘
â•‘           â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘            â•‘
â•‘            â•šâ•â•â–€â–€â•â• â•šâ•â•â•â•â•â• â•šâ•â•   â•šâ•â•       â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•            â•‘
â•‘                                                                           â•‘
â•‘                    qBit Smart Web Manager v1.18                           â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

è¯·é€‰æ‹©æ“ä½œ:

  1) å…¨æ–°å®‰è£…          # è‡ªåŠ¨å®‰è£…ä¾èµ– + å¯é€‰é…ç½®åŸŸå/HTTPS
  2) æ›´æ–°ç¨‹åº          # ä¿ç•™æ•°æ®åº“ï¼Œåªæ›´æ–°ä»£ç 
  3) é…ç½®åŸŸå/HTTPS    # Nginxåä»£ + Let's Encryptè¯ä¹¦
  4) æŸ¥çœ‹çŠ¶æ€
  5) é‡å¯æœåŠ¡
  6) æŸ¥çœ‹æ—¥å¿—
  7) å¸è½½
  0) é€€å‡º
```

### ğŸ“Œ ä¸€é”®è„šæœ¬åŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|-----|------|
| âœ… è‡ªåŠ¨å®‰è£…ä¾èµ– | Pythonã€pipã€nginxã€certbot ç­‰ |
| âœ… è‡ªåŠ¨é…ç½®æœåŠ¡ | systemd æœåŠ¡ï¼Œå¼€æœºè‡ªå¯ |
| âœ… ç»‘å®šåŸŸå | Nginx åå‘ä»£ç† |
| âœ… è‡ªåŠ¨ HTTPS | Let's Encrypt å…è´¹è¯ä¹¦ï¼Œè‡ªåŠ¨ç»­æœŸ |
| âœ… ä¸€é”®æ›´æ–° | ä¿ç•™æ•°æ®åº“å’Œé…ç½® |
| âœ… ä¸€é”®å¸è½½ | å¯é€‰ä¿ç•™æ•°æ® |

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½æ¨¡å— | è¯´æ˜ |
|---------|------|
| ğŸ–¥ï¸ **å¤šqBå®ä¾‹ç®¡ç†** | æŒ‰å‰©ä½™ç©ºé—´è‡ªåŠ¨åˆ†é…ç§å­ |
| ğŸ¯ **æ™ºèƒ½é™é€Ÿ** | PID/Kalmanæ§åˆ¶å™¨ï¼Œ4é˜¶æ®µåŠ¨æ€å‚æ•° |
| ğŸ“¡ **RSSè‡ªåŠ¨æŠ“å–** | Vertexé£æ ¼ï¼ŒåªæŠ“å–çœŸæ­£æ–°å‘å¸ƒçš„ç§å­ |
| ğŸ—‘ï¸ **è‡ªåŠ¨åˆ ç§** | 8ä¸ªå†…ç½®è§„åˆ™ï¼Œåˆ å‰å¼ºåˆ¶æ±‡æŠ¥ |
| ğŸŒ **é€šç”¨PTç«™ç‚¹è¾…åŠ©å™¨** | æ”¯æŒæ‰€æœ‰NexusPHPç«™ç‚¹ |
| ğŸ“¥ **ä¸‹è½½é™é€Ÿ + æ±‡æŠ¥ä¼˜åŒ–** | é˜²æ­¢è¶…é€Ÿï¼Œæ™ºèƒ½æ±‡æŠ¥æ—¶æœº |
| ğŸ’¾ **ç§å­çŠ¶æ€æŒä¹…åŒ–** | é‡å¯åæ¢å¤é™é€ŸçŠ¶æ€ |
| ğŸ“² **Telegramé€šçŸ¥** | å¯åŠ¨/æ·»åŠ /åˆ é™¤/è­¦å‘Š |
| ğŸ” **è®¤è¯ç³»ç»Ÿ** | é¦–æ¬¡è®¾ç½®å¯†ç ï¼Œä¼šè¯ç®¡ç† |
| ğŸ“¦ **é…ç½®å¯¼å…¥/å¯¼å‡º** | JSONæ ¼å¼å¤‡ä»½æ¢å¤ |

---

## ğŸ“¸ æˆªå›¾é¢„è§ˆ

<details>
<summary>ç‚¹å‡»å±•å¼€æˆªå›¾</summary>

### ä»ªè¡¨ç›˜
![Dashboard](docs/images/dashboard.png)

### ç«™ç‚¹ç®¡ç†
![Sites](docs/images/sites.png)

### è®¾ç½®é¡µé¢
![Settings](docs/images/settings.png)

</details>

---

## âš™ï¸ æœåŠ¡ç®¡ç†

å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç®¡ç†æœåŠ¡ï¼š

```bash
# å¯åŠ¨
systemctl start qbit-smart

# åœæ­¢
systemctl stop qbit-smart

# é‡å¯
systemctl restart qbit-smart

# æŸ¥çœ‹çŠ¶æ€
systemctl status qbit-smart

# æŸ¥çœ‹æ—¥å¿—
journalctl -u qbit-smart -f

# å†æ¬¡è¿è¡Œç®¡ç†èœå•
bash <(curl -sL https://raw.githubusercontent.com/1336665/qbit-smart-web/main/install.sh)
```

---

## ğŸ”§ æ‰‹åŠ¨å®‰è£…

å¦‚æœä¸€é”®è„šæœ¬ä¸é€‚ç”¨äºæ‚¨çš„ç¯å¢ƒï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£…ï¼š

```bash
# 1. å®‰è£…ç³»ç»Ÿä¾èµ–
apt update
apt install -y python3 python3-pip curl wget unzip

# 2. å®‰è£… Python ä¾èµ–
pip3 install --break-system-packages flask requests beautifulsoup4 lxml feedparser qbittorrent-api

# 3. ä¸‹è½½ç¨‹åº
mkdir -p /opt/qbit-smart-web
cd /opt/qbit-smart-web
wget https://github.com/1336665/qbit-smart-web/archive/refs/heads/main.zip
unzip main.zip
mv qbit-smart-web-main/* .
rm -rf qbit-smart-web-main main.zip

# 4. è¿è¡Œ
python3 app.py

# 5. è®¿é—® http://ä½ çš„IP:5000
```

---

## ğŸ“‹ ç¯å¢ƒå˜é‡

| å˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|-------|------|
| `PORT` | 5000 | ç›‘å¬ç«¯å£ |
| `HOST` | 0.0.0.0 | ç›‘å¬åœ°å€ |
| `SECRET_KEY` | éšæœºç”Ÿæˆ | Sessionå¯†é’¥ |
| `DEBUG` | false | è°ƒè¯•æ¨¡å¼ |

---

## â“ å¸¸è§é—®é¢˜

### Q: å®‰è£…ä¾èµ–æŠ¥é”™ `externally-managed-environment`

```bash
# ä½¿ç”¨ --break-system-packages å‚æ•°
pip3 install --break-system-packages flask requests beautifulsoup4 lxml feedparser qbittorrent-api
```

### Q: å¦‚ä½•æ›´æ”¹ç«¯å£ï¼Ÿ

é‡æ–°è¿è¡Œä¸€é”®è„šæœ¬ï¼Œé€‰æ‹©ã€Œå…¨æ–°å®‰è£…ã€å¹¶è¾“å…¥æ–°ç«¯å£ï¼Œæˆ–æ‰‹åŠ¨ç¼–è¾‘ï¼š

```bash
systemctl edit qbit-smart --full
# ä¿®æ”¹ Environment="PORT=5000" ä¸­çš„ç«¯å£å·
systemctl daemon-reload
systemctl restart qbit-smart
```

### Q: HTTPS è¯ä¹¦ç»­æœŸ

è¯ä¹¦ä¼šè‡ªåŠ¨ç»­æœŸï¼Œå¯ä»¥æ‰‹åŠ¨æµ‹è¯•ï¼š
```bash
certbot renew --dry-run
```

### Q: å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿ

åˆ é™¤æ•°æ®åº“é‡æ–°è®¾ç½®ï¼š
```bash
rm /opt/qbit-smart-web/qbit_smart.db
systemctl restart qbit-smart
```

### Q: å¦‚ä½•æŸ¥çœ‹è¿è¡Œæ—¥å¿—ï¼Ÿ

```bash
# å®æ—¶æŸ¥çœ‹
journalctl -u qbit-smart -f

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
journalctl -u qbit-smart -n 100
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.18.0 (2025-01-06)
- ğŸ› **ä¿®å¤å¤šè¡ŒCookieæ ¼å¼é—®é¢˜** - ä»æµè§ˆå™¨å¤åˆ¶çš„å¤šè¡ŒCookieä¼šè‡ªåŠ¨åˆå¹¶ä¸ºå•è¡Œ
- ğŸ› **ä¿®å¤URLä¸å¯è§å­—ç¬¦é—®é¢˜** - è‡ªåŠ¨æ¸…ç†URLä¸­çš„BOMã€é›¶å®½å­—ç¬¦ç­‰
- ğŸ› **ä¿®å¤CookieéªŒè¯é€»è¾‘** - éšä¾¿å¡«Cookieä¸å†èƒ½é€šè¿‡éªŒè¯
- âœ¨ RSSé»˜è®¤æœ€å¤§ç§å­å¹´é¾„ä»10åˆ†é’Ÿæ”¹ä¸º60åˆ†é’Ÿ
- âœ¨ RSSæ¯æ¬¡æœ€å¤§æ·»åŠ ç§å­æ•°ä»5ä¸ªæ”¹ä¸º10ä¸ª

### v1.16.0 (2025-01-05)
- ğŸ› ä¿®å¤ Cookie æ£€æµ‹ 401 é”™è¯¯
- ğŸ› ä¿®å¤ç§»åŠ¨ç«¯è®¾ç½®é¡µé¢æŒ‰é’®æº¢å‡º
- ğŸ› ä¿®å¤æ·»åŠ ç«™ç‚¹æŒ‰é’® loading å˜å½¢
- ğŸ› ä¿®å¤é™é€ŸçŠ¶æ€æ˜¾ç¤ºé”™è¯¯

[æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—](CHANGELOG.md)

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
